{
  "hash": "f5489a346a8fd03b214c0861cb4d799d",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"02 Data Acqusition\"\ndate: \"2021-04\"\noutput:\n  html_document:\n    toc: true\n    toc_float: true\n    df_print: paged\n    collapsed: false\n    number_sections: true\n    toc_depth: 3\n    code_folding: hide\n---\n\n\n\n\n\n# Data Science at TUHH ------------------------------------------------------\n## Data Acquisition Challenge ----\n\n###Challenge 1 ----\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# 1.0 Load libraries ----\n\nlibrary(httr)\nlibrary(jsonlite)\nlibrary(tibble)\nlibrary(tidyverse)\nlibrary(keyring)\n\n# I get an error while building the website because this key\n#So, I am commenting it.\n\n# keyring::key_set(\"token\")\n# GET(alphavantage_api_url, query = list('function' = \"GLOBAL_QUOTE\",\n#                                        symbol     = ticker,\n#                                        apikey     = key_get(\"token\")))\n#     \n#     \n\n\n#API for last 24h prices of the Crypto Currencies in Binance.\nresp <- GET(\"https://api2.binance.com/api/v3/ticker/24hr\")\n\n\ncriptoData_tbl <- fromJSON(rawToChar(resp$content))\n\nnames(criptoData_tbl)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"symbol\"             \"priceChange\"        \"priceChangePercent\"\n [4] \"weightedAvgPrice\"   \"prevClosePrice\"     \"lastPrice\"         \n [7] \"lastQty\"            \"bidPrice\"           \"bidQty\"            \n[10] \"askPrice\"           \"askQty\"             \"openPrice\"         \n[13] \"highPrice\"          \"lowPrice\"           \"volume\"            \n[16] \"quoteVolume\"        \"openTime\"           \"closeTime\"         \n[19] \"firstId\"            \"lastId\"             \"count\"             \n```\n\n\n:::\n\n```{.r .cell-code}\ncriptoData_wrangled_tbl <- criptoData_tbl %>%\n  \n  select(symbol, lastPrice, contains(\"Change\"), prevClosePrice, openPrice, highPrice, lowPrice, volume) %>%\n  \n  arrange(desc(priceChangePercent )) %>%\n  \n  as_tibble()\n\ncriptoData_wrangled_10_tbl <- slice_max(criptoData_wrangled_tbl,priceChangePercent,n= 10)\n\ncriptoData_wrangled_10_tbl\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 10 × 9\n   symbol   lastPrice   priceChange priceChangePercent prevClosePrice openPrice \n   <chr>    <chr>       <chr>       <chr>              <chr>          <chr>     \n 1 HOTUSDT  0.00237500  0.00021500  9.954              0.00216000     0.00216000\n 2 TIAUSDC  9.50000000  0.86000000  9.954              8.62000000     8.64000000\n 3 DOGEEUR  0.15282000  0.01382000  9.942              0.13890000     0.13900000\n 4 ACEBTC   0.00007300  0.00000660  9.940              0.00006640     0.00006640\n 5 GRTTRY   10.93600000 0.98800000  9.932              9.94800000     9.94800000\n 6 OCEANTRY 33.49400000 3.02300000  9.921              30.74700000    30.471000…\n 7 DFUSDT   0.04687000  0.00423000  9.920              0.04264000     0.04264000\n 8 ZENUSDT  9.01000000  0.81000000  9.878              8.20000000     8.20000000\n 9 HOOKUSDT 0.85770000  0.07710000  9.877              0.78140000     0.78060000\n10 UFTUSDT  0.47290000  0.04250000  9.875              0.43090000     0.43040000\n# ℹ 3 more variables: highPrice <chr>, lowPrice <chr>, volume <chr>\n```\n\n\n:::\n\n```{.r .cell-code}\n# Visualization  ----\n\ncriptoData_wrangled_10_tbl %>%\n  \n  ggplot(aes(x = symbol, y = priceChangePercent)) +\n  \n  geom_col(fill = \"#2DC6D6\") + # Use geom_col for a bar plot\n  \n  labs(\n    title    = \"Latest Crypto Changes\",\n    x = \"\", # Override defaults for x and y\n    y = \"Change Percantage\"\n  )\n```\n\n::: {.cell-output-display}\n![](02_data_acquisition_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n:::\n\n### Challenge 2 -------------------------------------\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# 1.0 Libraries ----\n\nlibrary(tidyverse) # Main Package - Loads dplyr, purrr, etc.\nlibrary(rvest)     # HTML Hacking & Web Scraping\nlibrary(xopen)     # Quickly opening URLs\nlibrary(jsonlite)  # converts JSON files to R objects\nlibrary(glue)      # concatenate strings\nlibrary(stringi)   # character string/text processing\nlibrary(purrr)\n\n# 1.1 Collecting Product Data ----\n# MTB Style bikes and prices.\n\nurl_home          <- \"https://www.rosebikes.com/bikes/mtb\"\n\nhtml_home         <- read_html(url_home)\n\nbike_mtb_model_char <- html_home %>%\n  \n  html_nodes(css = \".large-4 .basic-headline__title\") %>%\n  html_text2()\n\n\nbike_mtb_model_tbl <- bike_mtb_model_char %>% \n  as_tibble() %>%\n  rename(\"BikeModel\" = \"value\")\n\nbike_mtb_model_tbl\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 8 × 1\n  BikeModel     \n  <chr>         \n1 PDQ           \n2 COUNT SOLO    \n3 THRILL HILL   \n4 GROUND CONTROL\n5 ROOT MILLER   \n6 BONERO        \n7 SCRUB         \n8 THE BRUCE     \n```\n\n\n:::\n\n```{.r .cell-code}\nbike_mtb_price_char <- html_home %>%\n  \n  html_nodes(css = \".catalog-category-bikes__price-title\") %>%\n  html_text2()\n\nbike_mtb_price_tbl <- parse_number(bike_mtb_price_char) %>% \n  as_tibble() %>%\n  rename(\"BikePriceInEuros\" = \"value\")\n\nbike_mtb_price_tbl\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 8 × 1\n  BikePriceInEuros\n             <dbl>\n1             2699\n2              499\n3             2299\n4             1499\n5             1799\n6              999\n7             3299\n8              799\n```\n\n\n:::\n\n```{.r .cell-code}\nbike_mtb_tbl <- tibble(bike_mtb_model_tbl, bike_mtb_price_tbl) %>%\n  arrange(BikePriceInEuros)\n\nmeanPrice <- mean(bike_mtb_price_tbl$BikePriceInEuros)\n\nmeanPrice\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 1736.5\n```\n\n\n:::\n\n```{.r .cell-code}\nbike_mtb_tbl\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 8 × 2\n  BikeModel      BikePriceInEuros\n  <chr>                     <dbl>\n1 COUNT SOLO                  499\n2 THE BRUCE                   799\n3 BONERO                      999\n4 GROUND CONTROL             1499\n5 ROOT MILLER                1799\n6 THRILL HILL                2299\n7 PDQ                        2699\n8 SCRUB                      3299\n```\n\n\n:::\n\n```{.r .cell-code}\nbike_mtb_tbl %>%\n  ggplot(aes(x = BikeModel, y = BikePriceInEuros)) +\n  geom_col(fill = \"slateblue4\")+\n  geom_label(aes(label = BikePriceInEuros))\n```\n\n::: {.cell-output-display}\n![](02_data_acquisition_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}