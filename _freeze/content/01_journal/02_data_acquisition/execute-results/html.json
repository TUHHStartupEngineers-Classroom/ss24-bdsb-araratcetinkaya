{
  "hash": "47013d0b36d2fbf07a09eef971fc9642",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Data Acquisition\"\nauthor: \"Ararat Ã‡etinkaya\"\n---\n\n::: {.cell}\n\n```{.r .cell-code}\n# 1.0 Load libraries ----\n\nlibrary(httr)\nlibrary(jsonlite)\nlibrary(tibble)\nlibrary(tidyverse)\nlibrary(keyring)\n\n# I get an error while building the website because this key\n#So, I am commenting it.\n\n# keyring::key_set(\"token\")\n# GET(alphavantage_api_url, query = list('function' = \"GLOBAL_QUOTE\",\n#                                        symbol     = ticker,\n#                                        apikey     = key_get(\"token\")))\n#     \n#     \n\n\n#API for last 24h prices of the Crypto Currencies in Binance.\nresp <- GET(\"https://api2.binance.com/api/v3/ticker/24hr\")\n\n\ncriptoData_tbl <- fromJSON(rawToChar(resp$content))\n\nnames(criptoData_tbl)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#>  [1] \"symbol\"             \"priceChange\"        \"priceChangePercent\"\n#>  [4] \"weightedAvgPrice\"   \"prevClosePrice\"     \"lastPrice\"         \n#>  [7] \"lastQty\"            \"bidPrice\"           \"bidQty\"            \n#> [10] \"askPrice\"           \"askQty\"             \"openPrice\"         \n#> [13] \"highPrice\"          \"lowPrice\"           \"volume\"            \n#> [16] \"quoteVolume\"        \"openTime\"           \"closeTime\"         \n#> [19] \"firstId\"            \"lastId\"             \"count\"\n```\n\n\n:::\n\n```{.r .cell-code}\ncriptoData_wrangled_tbl <- criptoData_tbl %>%\n  \n  select(symbol, lastPrice, contains(\"Change\"), prevClosePrice, openPrice, highPrice, lowPrice, volume) %>%\n  \n  arrange(desc(priceChangePercent )) %>%\n  \n  as_tibble()\n\ncriptoData_wrangled_10_tbl <- slice_max(criptoData_wrangled_tbl,priceChangePercent,n= 10)\n\ncriptoData_wrangled_10_tbl\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"symbol\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"lastPrice\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"priceChange\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"priceChangePercent\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"prevClosePrice\"],\"name\":[5],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"openPrice\"],\"name\":[6],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"highPrice\"],\"name\":[7],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"lowPrice\"],\"name\":[8],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"volume\"],\"name\":[9],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"WNXMUSDT\",\"2\":\"79.20000000\",\"3\":\"6.95000000\",\"4\":\"9.619\",\"5\":\"72.25000000\",\"6\":\"72.25000000\",\"7\":\"82.07000000\",\"8\":\"72.25000000\",\"9\":\"27697.48000000\"},{\"1\":\"ETHFIBTC\",\"2\":\"0.00006006\",\"3\":\"0.00000523\",\"4\":\"9.539\",\"5\":\"0.00005472\",\"6\":\"0.00005483\",\"7\":\"0.00006230\",\"8\":\"0.00005452\",\"9\":\"262998.20000000\"},{\"1\":\"ETHFIFDUSD\",\"2\":\"4.18600000\",\"3\":\"0.36300000\",\"4\":\"9.495\",\"5\":\"3.80500000\",\"6\":\"3.82300000\",\"7\":\"4.35900000\",\"8\":\"3.79900000\",\"9\":\"464193.60000000\"},{\"1\":\"ARBBTC\",\"2\":\"0.00001691\",\"3\":\"0.00000146\",\"4\":\"9.450\",\"5\":\"0.00001544\",\"6\":\"0.00001545\",\"7\":\"0.00001744\",\"8\":\"0.00001540\",\"9\":\"2915584.80000000\"},{\"1\":\"ETHFIUSDT\",\"2\":\"4.18000000\",\"3\":\"0.35900000\",\"4\":\"9.395\",\"5\":\"3.82000000\",\"6\":\"3.82100000\",\"7\":\"4.36200000\",\"8\":\"3.78400000\",\"9\":\"35544222.90000000\"},{\"1\":\"REZBNB\",\"2\":\"0.00021330\",\"3\":\"0.00001830\",\"4\":\"9.385\",\"5\":\"0.00019500\",\"6\":\"0.00019500\",\"7\":\"0.00022490\",\"8\":\"0.00019490\",\"9\":\"1288613.00000000\"},{\"1\":\"ETHFITRY\",\"2\":\"134.05000000\",\"3\":\"11.38000000\",\"4\":\"9.277\",\"5\":\"122.77000000\",\"6\":\"122.67000000\",\"7\":\"139.11000000\",\"8\":\"121.71000000\",\"9\":\"1746213.80000000\"},{\"1\":\"LRCUSDT\",\"2\":\"0.29440000\",\"3\":\"0.02490000\",\"4\":\"9.239\",\"5\":\"0.26930000\",\"6\":\"0.26950000\",\"7\":\"0.30550000\",\"8\":\"0.26770000\",\"9\":\"33558684.00000000\"},{\"1\":\"ARBTUSD\",\"2\":\"1.17720000\",\"3\":\"0.09890000\",\"4\":\"9.172\",\"5\":\"1.07630000\",\"6\":\"1.07830000\",\"7\":\"1.23360000\",\"8\":\"1.07040000\",\"9\":\"115237.10000000\"},{\"1\":\"LRCTRY\",\"2\":\"9.44300000\",\"3\":\"0.79300000\",\"4\":\"9.168\",\"5\":\"8.64600000\",\"6\":\"8.65000000\",\"7\":\"9.75000000\",\"8\":\"8.63400000\",\"9\":\"1303384.30000000\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\n# Visualization  ----\n\ncriptoData_wrangled_10_tbl %>%\n  \n  ggplot(aes(x = symbol, y = priceChangePercent)) +\n  \n  geom_col(fill = \"#2DC6D6\") + # Use geom_col for a bar plot\n  \n  labs(\n    title    = \"Latest Crypto Changes\",\n    x = \"\", # Override defaults for x and y\n    y = \"Change Percantage\"\n  )\n```\n\n::: {.cell-output-display}\n![](02_data_acquisition_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n:::\n\n### Challenge 2 -------------------------------------\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# 1.0 Libraries ----\n\nlibrary(tidyverse) # Main Package - Loads dplyr, purrr, etc.\nlibrary(rvest)     # HTML Hacking & Web Scraping\nlibrary(xopen)     # Quickly opening URLs\nlibrary(jsonlite)  # converts JSON files to R objects\nlibrary(glue)      # concatenate strings\nlibrary(stringi)   # character string/text processing\nlibrary(purrr)\n\n# 1.1 Collecting Product Data ----\n# MTB Style bikes and prices.\n\nurl_home          <- \"https://www.rosebikes.com/bikes/mtb\"\n\nhtml_home         <- read_html(url_home)\n\nbike_mtb_model_char <- html_home %>%\n  \n  html_nodes(css = \".large-4 .basic-headline__title\") %>%\n  html_text2()\n\n\nbike_mtb_model_tbl <- bike_mtb_model_char %>% \n  as_tibble() %>%\n  rename(\"BikeModel\" = \"value\")\n\nbike_mtb_model_tbl\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"BikeModel\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"PDQ\"},{\"1\":\"COUNT SOLO\"},{\"1\":\"THRILL HILL\"},{\"1\":\"GROUND CONTROL\"},{\"1\":\"ROOT MILLER\"},{\"1\":\"BONERO\"},{\"1\":\"SCRUB\"},{\"1\":\"THE BRUCE\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\nbike_mtb_price_char <- html_home %>%\n  \n  html_nodes(css = \".catalog-category-bikes__price-title\") %>%\n  html_text2()\n\nbike_mtb_price_tbl <- parse_number(bike_mtb_price_char) %>% \n  as_tibble() %>%\n  rename(\"BikePriceInEuros\" = \"value\")\n\nbike_mtb_price_tbl\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"BikePriceInEuros\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"2699\"},{\"1\":\"499\"},{\"1\":\"2299\"},{\"1\":\"1499\"},{\"1\":\"1799\"},{\"1\":\"999\"},{\"1\":\"3299\"},{\"1\":\"799\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\nbike_mtb_tbl <- tibble(bike_mtb_model_tbl, bike_mtb_price_tbl) %>%\n  arrange(BikePriceInEuros)\n\nmeanPrice <- mean(bike_mtb_price_tbl$BikePriceInEuros)\n\nmeanPrice\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> [1] 1736.5\n```\n\n\n:::\n\n```{.r .cell-code}\nbike_mtb_tbl\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"BikeModel\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"BikePriceInEuros\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"COUNT SOLO\",\"2\":\"499\"},{\"1\":\"THE BRUCE\",\"2\":\"799\"},{\"1\":\"BONERO\",\"2\":\"999\"},{\"1\":\"GROUND CONTROL\",\"2\":\"1499\"},{\"1\":\"ROOT MILLER\",\"2\":\"1799\"},{\"1\":\"THRILL HILL\",\"2\":\"2299\"},{\"1\":\"PDQ\",\"2\":\"2699\"},{\"1\":\"SCRUB\",\"2\":\"3299\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\nbike_mtb_tbl %>%\n  ggplot(aes(x = BikeModel, y = BikePriceInEuros)) +\n  geom_col(fill = \"slateblue4\")+\n  geom_label(aes(label = BikePriceInEuros))\n```\n\n::: {.cell-output-display}\n![](02_data_acquisition_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}