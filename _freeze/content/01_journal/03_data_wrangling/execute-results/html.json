{
  "hash": "4f7566d32f074e308d9ad352e6b4f45c",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Data Wrangling\"\nauthor: \"Ararat Çetinkaya\"\noutput:\n  html_document:\n    toc: true\n    toc_float: true\n    df_print: paged\n    collapsed: false\n    number_sections: true\n    toc_depth: 3\n    code_folding: hide\n---\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Tidyverse\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n#> ✔ dplyr     1.1.4     ✔ readr     2.1.5\n#> ✔ forcats   1.0.0     ✔ stringr   1.5.1\n#> ✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n#> ✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n#> ✔ purrr     1.0.2     \n#> ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n#> ✖ dplyr::filter() masks stats::filter()\n#> ✖ dplyr::lag()    masks stats::lag()\n#> ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(vroom)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> \n#> Attaching package: 'vroom'\n#> \n#> The following objects are masked from 'package:readr':\n#> \n#>     as.col_spec, col_character, col_date, col_datetime, col_double,\n#>     col_factor, col_guess, col_integer, col_logical, col_number,\n#>     col_skip, col_time, cols, cols_condense, cols_only, date_names,\n#>     date_names_lang, date_names_langs, default_locale, fwf_cols,\n#>     fwf_empty, fwf_positions, fwf_widths, locale, output_column,\n#>     problems, spec\n```\n\n\n:::\n\n```{.r .cell-code}\n# Data Table\nlibrary(data.table)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> \n#> Attaching package: 'data.table'\n#> \n#> The following objects are masked from 'package:lubridate':\n#> \n#>     hour, isoweek, mday, minute, month, quarter, second, wday, week,\n#>     yday, year\n#> \n#> The following objects are masked from 'package:dplyr':\n#> \n#>     between, first, last\n#> \n#> The following object is masked from 'package:purrr':\n#> \n#>     transpose\n```\n\n\n:::\n\n```{.r .cell-code}\n# Counter\nlibrary(tictoc)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> \n#> Attaching package: 'tictoc'\n#> \n#> The following object is masked from 'package:data.table':\n#> \n#>     shift\n```\n\n\n:::\n\n```{.r .cell-code}\n# DATA IMPORT ----\n\n#patent_tbl\n\ncol_types_patent <- list(\n  id = col_character(),\n  date = col_date(\"%Y-%m-%d\"),\n  num_claims = col_double()\n)\n\npatent_tbl <- vroom(\n  file       = \"C:/Users/arara/OneDrive/Belgeler/GitHub/ss24-bdsb-araratcetinkaya/03_data_wrangling_files/Patent_data_reduced/patent.tsv\", \n  delim      = \"\\t\", \n  col_types  = col_types_patent,\n  na         = c(\"\", \"NA\", \"NULL\")\n)\n\n\n#patent_assignee_tbl\n\ncol_types_patent_assignee <- list(\n  patent_id = col_character(),\n  assignee_id = col_character()\n)\n\npatent_assignee_tbl <- vroom(\n  file       = \"C:/Users/arara/OneDrive/Belgeler/GitHub/ss24-bdsb-araratcetinkaya/03_data_wrangling_files/Patent_data_reduced/patent_assignee.tsv\", \n  delim      = \"\\t\", \n  col_types  = col_types_patent_assignee,\n  na         = c(\"\", \"NA\", \"NULL\")\n)\n\n\n#assignee_tbl\n\ncol_types_assignee_tbl <- list(\n  id = col_character(),\n  type = col_integer(),\n  organization = col_character()\n)\n\nassignee_tbl <- vroom(\n  file       = \"C:/Users/arara/OneDrive/Belgeler/GitHub/ss24-bdsb-araratcetinkaya/03_data_wrangling_files/Patent_data_reduced/assignee.tsv\", \n  delim      = \"\\t\", \n  col_types  = col_types_assignee_tbl,\n  na         = c(\"\", \"NA\", \"NULL\")\n)\n\n#uspc_tbl\n\ncol_types_uspc_tbl <- list(\n  patent_id = col_character(),\n  mainclass_id = col_character(),\n  sequence = col_integer()\n)\n\nuspc_tbl <- vroom(\n  file       = \"C:/Users/arara/OneDrive/Belgeler/GitHub/ss24-bdsb-araratcetinkaya/03_data_wrangling_files/Patent_data_reduced/uspc.tsv\", \n  delim      = \"\\t\", \n  col_types  = col_types_uspc_tbl,\n  na         = c(\"\", \"NA\", \"NULL\")\n)\n\n\n\n#setting data.table\n\nsetDT(patent_tbl)\nsetDT(patent_assignee_tbl)\nsetDT(assignee_tbl)\nsetDT(uspc_tbl)\n\n# DATA WRANGLING ----\n\n# combining data tables\n\n#Table for question 1 - patent dominance\n\npatent_dominance_q1 <- assignee_tbl %>% left_join( y=patent_assignee_tbl, by = c(\"id\" = \"assignee_id\"))\n\n#Table for question 2 - Recent patent activity\n\nrecent_patent_q2 <- patent_dominance_q1 %>% left_join( y=patent_tbl, by = c(\"patent_id\" = \"id\"))\n\n#Table for question 3 - Innovation in tech\n\ninnovation_tech_q3 <- patent_dominance_q1 %>% left_join( y=uspc_tbl, by = \"patent_id\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> Warning in left_join(., y = uspc_tbl, by = \"patent_id\"): Detected an unexpected many-to-many relationship between `x` and `y`.\n#> ℹ Row 1 of `x` matches multiple rows in `y`.\n#> ℹ Row 376875 of `y` matches multiple rows in `x`.\n#> ℹ If a many-to-many relationship is expected, set `relationship =\n#>   \"many-to-many\"` to silence this warning.\n```\n\n\n:::\n\n```{.r .cell-code}\n# DATA ANALYSIS ----\n\n#Question 1 patent dominance\n\n## Patent types for USA based organizations and individuals are taken from excel\n\npatent_dominance_USA_tbl <- patent_dominance_q1 %>%\n  select(organization,type) %>%\n  filter(type == c('2','4','6','8','9'))\n\norganizationNumberUSA <- table(patent_dominance_USA_tbl$organization) %>%\n  as.data.frame() %>%\n  rename('Organization' = 'Var1') %>%\n  arrange(desc(Freq)) %>%\n  slice(1:10)%>%\n  as_tibble()\n\norganizationNumberUSA\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Organization\"],\"name\":[1],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"Freq\"],\"name\":[2],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"International Business Machines Corporation\",\"2\":\"1509\"},{\"1\":\"Microsoft Corporation\",\"2\":\"633\"},{\"1\":\"Google Inc.\",\"2\":\"534\"},{\"1\":\"QUALCOMM Incorporated\",\"2\":\"519\"},{\"1\":\"Apple Inc.\",\"2\":\"440\"},{\"1\":\"General Electric Company\",\"2\":\"375\"},{\"1\":\"Hewlett-Packard Development Company, L.P.\",\"2\":\"327\"},{\"1\":\"AT&T INTELLECTUAL PROPERTY I, L.P.\",\"2\":\"325\"},{\"1\":\"Intel Corporation\",\"2\":\"324\"},{\"1\":\"GM Global Technology Operations LLC\",\"2\":\"307\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\n###IBM has the most patents in USA\n\n\n#Question 2 Recent patent activity\n\npatent_august2014_tbl <- recent_patent_q2 %>%\n  select(organization, date, num_claims)  %>%\n  mutate(month = month(date)) %>%\n  filter(month==8) %>%\n  select(-num_claims, -date) %>%\n  count(organization) %>% \n  rename(\"PatentNumber\" = \"n\" ) %>% \n  arrange(desc(PatentNumber)) %>%\n  slice(1:10)%>%\n  as_tibble()\n\npatent_august2014_tbl\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"organization\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"PatentNumber\"],\"name\":[2],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"International Business Machines Corporation\",\"2\":\"718\"},{\"1\":\"Samsung Electronics Co., Ltd.\",\"2\":\"524\"},{\"1\":\"Canon Kabushiki Kaisha\",\"2\":\"361\"},{\"1\":\"Microsoft Corporation\",\"2\":\"337\"},{\"1\":\"Sony Corporation\",\"2\":\"269\"},{\"1\":\"Google Inc.\",\"2\":\"240\"},{\"1\":\"QUALCOMM Incorporated\",\"2\":\"223\"},{\"1\":\"Apple Inc.\",\"2\":\"222\"},{\"1\":\"Kabushiki Kaisha Toshiba\",\"2\":\"213\"},{\"1\":\"LG Electronics Inc.\",\"2\":\"211\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\n#IBM has the most patents in August 2014\n\n#Question 3 Innovation in Tech\n\n\nuspto_mainclass_tbl <- innovation_tech_q3 %>%\n  select(organization,mainclass_id)\n\norganizationNumberWW <- table(uspto_mainclass_tbl$organization) %>%\n  as.data.frame() %>%\n  rename('organization' = 'Var1') %>%\n  arrange(desc(Freq)) %>%\n  slice(1:10)%>%\n  as_tibble()\n\norganizationNumberWW #Top10 worldwide companies with the most patent\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"organization\"],\"name\":[1],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"Freq\"],\"name\":[2],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"International Business Machines Corporation\",\"2\":\"20680\"},{\"1\":\"Samsung Electronics Co., Ltd.\",\"2\":\"16089\"},{\"1\":\"Canon Kabushiki Kaisha\",\"2\":\"10301\"},{\"1\":\"Sony Corporation\",\"2\":\"9073\"},{\"1\":\"Microsoft Corporation\",\"2\":\"8126\"},{\"1\":\"QUALCOMM Incorporated\",\"2\":\"7837\"},{\"1\":\"Kabushiki Kaisha Toshiba\",\"2\":\"7457\"},{\"1\":\"Google Inc.\",\"2\":\"6827\"},{\"1\":\"LG Electronics Inc.\",\"2\":\"6386\"},{\"1\":\"Panasonic Corporation\",\"2\":\"6124\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\norganizationNumberWW <- organizationNumberWW %>% left_join( y=uspto_mainclass_tbl, by = \"organization\")\n\n\nmainclassNumber <- table(organizationNumberWW$mainclass_id) %>%\n  as.data.frame() %>%\n  rename('USPTO Main Class ID' = 'Var1') %>%\n  arrange(desc(Freq)) %>%\n  slice(1:5)%>%\n  as_tibble()\n\nmainclassNumber\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"USPTO Main Class ID\"],\"name\":[1],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"Freq\"],\"name\":[2],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"257\",\"2\":\"7979\"},{\"1\":\"455\",\"2\":\"6191\"},{\"1\":\"370\",\"2\":\"5483\"},{\"1\":\"348\",\"2\":\"4113\"},{\"1\":\"709\",\"2\":\"4018\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}